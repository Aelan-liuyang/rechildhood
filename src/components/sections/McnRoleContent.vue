<template>
  <div>
    <h3>MCNæœºæ„ï¼šæµé‡å…¬å¼çš„åˆ¶é€ è€…</h3>
    <p>"ç½‘çº¢å„¿ç«¥"å†…å®¹çš„åˆ¶ä½œè€…è¿œä¸æ­¢æ˜¯åˆ†äº«ç”Ÿæ´»çš„çˆ¶æ¯ï¼Œå…¶èƒŒåé€šå¸¸æœ‰ä¸“ä¸šçš„æ¨æ‰‹ã€‚MCNæœºæ„çœ‹åˆ°äº†å„¿ç«¥ç¾¤ä½“åœ¨çº¿ä¸Šå•†ä¸šå˜ç°ä¸Šçš„æ½œåŠ›ã€‚</p>

    <!-- ä¸¤ä¸ªå›¾è¡¨æ¨ªå‘å¸ƒå±€ -->
    <div class="charts-row">
      <div class="chart-item">
        <h4 class="chart-title">2023å¹´3æœˆ æœ‰å­©å®¶åº­äººç¾¤çº¿ä¸Šæ¶ˆè´¹èƒ½åŠ›</h4>
        <div ref="chart1" class="chart-container-small"></div>
        <!-- <p class="chart-note">æ³¨ï¼š1ã€æœ‰å­©å®¶åº­äººç¾¤æŒ‡å›¾åƒæ ‡ç­¾ä¸ºå·²å©šä¸”å®¶åº­æœ‰å­©å­ï¼ˆ0-18å²ï¼‰çš„æ´»è·ƒç”¨æˆ·;2ã€ä¸–ä»£çˆ¶æ¯æŒ‡95å+00åä¸­æ ‡ç­¾ä¸ºå·²å©šä¸”
          å®¶åº­æœ‰å­©å­(0-18å²)çš„æ´»è·ƒç”¨æˆ·;3ã€æ´»è·ƒå æ¯”TG1:ç›®æ ‡äººç¾¤æŸä¸ªæ ‡ç­¾å±æ€§çš„æœˆæ´»è·ƒå æ¯”é™¤ä»¥å…¨ç½‘å…·æœ‰è¯¥æ ‡ç­¾å±æ€§çš„æœˆæ´»è·ƒæ¯”*100
        </p> -->
      </div>
      <div class="chart-item">
        <h4 class="chart-title">2023å¹´3æœˆ æœ‰å­©å®¶åº­äººç¾¤çº¿ä¸Šæ¶ˆè´¹æ„æ„¿</h4>
        <div ref="chart2" class="chart-container-small"></div>
        <!-- <p class="chart-note">Sourceï¼šQuestMobile
          GROWTH ç”¨æˆ·ç”»åƒæ ‡ç­¾æ•°æ®åº“ 2025å¹´3æœˆã€‚</p> -->
      </div>
    </div>

    <!-- ç¬¬ä¸‰ä¸ªå›¾è¡¨å•ç‹¬å ä¸€è¡Œ -->
    <div class="chart-full">
      <h4 class="chart-title">2025å¹´3æœˆ æœ‰å­©å®¶åº­äººç¾¤&Zä¸–ä»£çˆ¶æ¯ å…´è¶£åå¥½æ´»è·ƒå æ¯”TOP15</h4>
      <div ref="chart3" class="chart-container-large"></div>
      <div class="chart-note-box">
        <div class="note-header">
          <span class="note-icon">ğŸ“</span>
          <span class="note-title">æ•°æ®è¯´æ˜</span>
        </div>
        <div class="note-content">
          <div class="note-item">
            <span class="note-label">1.</span>
            <span class="note-text"><strong>æœ‰å­©å®¶åº­äººç¾¤</strong>ï¼šç”»åƒæ ‡ç­¾ä¸ºå·²å©šä¸”å®¶åº­æœ‰å­©å­ï¼ˆ0-18å²ï¼‰çš„æ´»è·ƒç”¨æˆ·</span>
          </div>
          <div class="note-item">
            <span class="note-label">2.</span>
            <span class="note-text"><strong>Zä¸–ä»£çˆ¶æ¯</strong>ï¼š95å+00åä¸­æ ‡ç­¾ä¸ºå·²å©šä¸”å®¶åº­æœ‰å­©å­ï¼ˆ0-18å²ï¼‰çš„æ´»è·ƒç”¨æˆ·</span>
          </div>
          <div class="note-item">
            <span class="note-label">3.</span>
            <span class="note-text"><strong>æ´»è·ƒå æ¯”</strong>ï¼šç›®æ ‡äººç¾¤å…·æœ‰æŸä¸ªæ ‡ç­¾å±æ€§çš„æœˆæ´»è·ƒç”¨æˆ·æ•° Ã· è¯¥ç›®æ ‡äººç¾¤çš„æœˆæ´»è·ƒç”¨æˆ·æ•°</span>
          </div>
          <div class="note-item">
            <span class="note-label">4.</span>
            <span class="note-text"><strong>å æ¯”å·®å€¼</strong>ï¼šZä¸–ä»£çˆ¶æ¯å…´è¶£æ ‡ç­¾æ´»è·ƒå æ¯” - æœ‰å­©å®¶åº­äººç¾¤å…´è¶£æ ‡ç­¾æ´»è·ƒå æ¯”</span>
          </div>
          <div class="note-item">
            <span class="note-label">5.</span>
            <span class="note-text"><strong>æ´»è·ƒå æ¯”TGI</strong>ï¼šç›®æ ‡äººç¾¤æŸä¸ªæ ‡ç­¾å±æ€§çš„æœˆæ´»è·ƒå æ¯” Ã· å…¨ç½‘å…·æœ‰è¯¥æ ‡ç­¾å±æ€§çš„æœˆæ´»è·ƒå æ¯” Ã— 100</span>
          </div>
        </div>
        <div class="note-source">
          <span class="source-icon">ğŸ“Š</span>
          <span class="source-text">æ•°æ®æ¥æºï¼š<strong class="source-highlight">QuestMobile</strong> GROWTH ç”¨æˆ·ç”»åƒæ ‡ç­¾æ•°æ®åº“
            2025å¹´3æœˆ</span>
        </div>
      </div>
    </div>

    <div class="formula-box">
      <p class="formula">èŒå¨ƒ(40%) + å†²çªå‰§æƒ…(30%) + å•†å“æ¤å…¥(30%) = çˆ†æ¬¾æ¨¡æ¿</p>
    </div>

    <p>MCNå¸¸ä¼šå¥—ç”¨è¿™æ ·çš„æµé‡å…¬å¼ï¼Œä¸»åŠ¨ç­¾çº¦æœ‰æ½œåŠ›çš„ç´ äººè´¦å·ï¼Œæä¾›ä»äººè®¾å®šä½ã€å‰§æœ¬ç¼–å†™åˆ°æ‹æ‘„å‰ªè¾‘ã€å•†ä¸šå˜ç°çš„å…¨å¥—æœåŠ¡ã€‚</p>

    <div class="data-highlight">
      <p>ç²‰ä¸é‡ç™¾ä¸‡ä»¥ä¸Šè´¦å·ä¸­ï¼Œ<span class="big">54.9%</span>å·²ä¸MCNç­¾çº¦</p>
    </div>
    <p class="warning">ä½†æ˜¯MCNèµ„è´¨å‚å·®ä¸é½ï¼Œç­¾çº¦åä¼´éšç€çš„æ˜¯ï¼š</p>
    <ul>
      <li>é«˜é¢‘ç‡çš„è§†é¢‘å‘è¡¨ï¼ˆäº²å­ç±»å¤´éƒ¨è¾¾äººæœˆå‘å¸ƒè§†é¢‘æœ€é«˜è¾¾96æ¡ï¼‰</li>
      <li>ä¸å¹³ç­‰çš„åˆ†æˆæ¯”ä¾‹ï¼ˆè‡ªè¥æ¨¡å¼åˆ†æˆæœ€ä½ä»…30%ï¼‰</li>
      <li>å›°éš¾çš„è§£çº¦æ–¹å¼ä»¥åŠé«˜æ˜‚çš„è¿çº¦é‡‘ï¼ˆæœ€é«˜å¯è¾¾å•æœˆæµæ°´çš„24å€ï¼‰</li>
    </ul>
    <h4 style="margin-top: 30px; color: #2c3e50; font-size: 1.4rem;">MCNåˆä½œæ¨¡å¼ä¸åˆ†æˆæ¯”ä¾‹</h4>
    <div class="mcn-revenue-chart">
      <div class="revenue-model" v-for="model in mcnModels" :key="model.name">
        <div class="model-header" :style="{ background: model.gradient }">
          <h5>{{ model.name }}</h5>
          <p class="model-desc">{{ model.desc }}</p>
        </div>
        <div class="revenue-split">
          <div class="split-bar">
            <div class="creator-share" :style="{
              width: model.creatorShare,
              background: model.creatorColor,
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              color: 'white',
              fontWeight: '700',
              fontSize: '1.05rem',
              height: '100%',
              minHeight: '50px',
              padding: '0 10px',
              boxSizing: 'border-box'
            }">
              åˆ›ä½œè€… {{ model.creatorShare }}
            </div>
            <div class="mcn-share" :style="{
              width: model.mcnShare,
              background: '#3498db',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              color: 'white',
              fontWeight: '700',
              fontSize: '1.05rem',
              height: '100%',
              minHeight: '50px',
              padding: '0 10px',
              boxSizing: 'border-box'
            }">
              MCN {{ model.mcnShare }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="penalty-box">
      <div class="penalty-header">
        <span class="warning-icon">âš ï¸</span>
        <h4>è¿çº¦æ¡æ¬¾ç¤ºä¾‹</h4>
        <span class="warning-icon">âš ï¸</span>
      </div>
      <p class="penalty-hint">é¼ æ ‡æ‚¬åœæš‚åœå¼¹å¹•</p>
      <div class="danmaku-container">
        <div class="danmaku-track" v-for="(line, lineIndex) in 3" :key="lineIndex" :class="`track-${lineIndex + 1}`">
          <div class="danmaku-content" :style="{
            animationDelay: `${lineIndex * 1.5}s`,
            animationDuration: `${40 + lineIndex * 5}s`
          }">
            <span class="danmaku-item" v-for="(item, index) in penaltyItems" :key="`${lineIndex}-${index}`"
              :class="`item-style-${(index % 3) + 1}`">
              <span class="item-icon">{{ getItemIcon(index) }}</span>
              <span class="danmaku-text">{{ item.text }}</span>
              <span class="red-text">{{ item.highlight }}</span>
              <span class="danmaku-text">{{ item.suffix }}</span>
            </span>
            <!-- å¤åˆ¶ä¸€ä»½ç”¨äºæ— ç¼å¾ªç¯ -->
            <span class="danmaku-item" v-for="(item, index) in penaltyItems" :key="`${lineIndex}-copy-${index}`"
              :class="`item-style-${(index % 3) + 1}`">
              <span class="item-icon">{{ getItemIcon(index) }}</span>
              <span class="danmaku-text">{{ item.text }}</span>
              <span class="red-text">{{ item.highlight }}</span>
              <span class="danmaku-text">{{ item.suffix }}</span>
            </span>
          </div>
        </div>
      </div>
    </div>

    <p class="conclusion-text">è¿™ä¿ƒä½¿ç€çˆ¶æ¯ä¸å¾—ä¸å°†å„¿ç«¥è´¦å·çš„å•†ä¸šæ€§æé«˜ã€‚</p>
  </div>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from 'vue'
import * as echarts from 'echarts'

const chart1 = ref(null)
const chart2 = ref(null)
const chart3 = ref(null)
let myChart1Instance = null
let myChart2Instance = null
let myChart3Instance = null

// è¿çº¦æ¡æ¬¾æ•°æ®
const penaltyItems = [
  { text: 'æœªç»åŒæ„åœ¨éæŒ‡å®šå¹³å°è¡¨æ¼”ï¼Œè¿è§„ä¸€æ¬¡éœ€æ‰¿æ‹…åˆåŒæœŸå†…å•æœˆæœ€é«˜æµæ°´æ”¶å…¥çš„', highlight: '24å€', suffix: 'èµ”å¿ã€€' },
  { text: 'æœªç»åŒæ„æ“…è‡ªå¸¦å…¬å¸å¹³å°çš„æ¶ˆè´¹è€…å»å…¶ä»–å¹³å°æ¶ˆè´¹çš„ï¼Œå‘ç”Ÿä¸€æ¬¡ï¼Œéœ€æ‰¿æ‹…æœ€é«˜å•æœˆæµæ°´æ”¶å…¥çš„', highlight: '24å€', suffix: 'èµ”å¿ã€€' },
  { text: 'æœªç»åŒæ„æ“…è‡ªæ¥ç¬¬ä¸‰æ–¹æ´»åŠ¨çš„ï¼Œå‘ç”Ÿä¸€æ¬¡é¡»èµ”å¿å…¬å¸', highlight: '50ä¸‡å…ƒ', suffix: 'ã€€' },
  { text: 'ä¸»æ’­æ“…è‡ªæå–è´¦å·ä½£é‡‘çš„ï¼Œéœ€èµ”å¿ä¸ä½äº', highlight: '50ä¸‡å…ƒ', suffix: 'ã€€' },
  { text: 'åŠè¯±ã€å¸®åŠ©å…¶ä»–å‘˜å·¥åŠåˆä½œä¼™ä¼´ç¦»èŒã€ç»ˆæ­¢åˆä½œçš„ï¼Œå…¬å¸å¯è§£é™¤åˆåŒå¹¶ç´¢èµ”ä¸ä½äº', highlight: '50ä¸‡å…ƒ', suffix: 'ã€€' }
]

// MCNåˆä½œæ¨¡å¼æ•°æ®
const mcnModels = [
  {
    name: 'è‡ªè¥æ¨¡å¼',
    desc: 'MCNå…¨ç¨‹è¿è¥',
    gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
    creatorShare: '30%',
    mcnShare: '70%',
    creatorColor: '#e74c3c'
  },
  {
    name: 'è”è¥æ¨¡å¼',
    desc: 'å…±åŒè¿è¥ç®¡ç†',
    gradient: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
    creatorShare: '50%',
    mcnShare: '50%',
    creatorColor: '#e74c3c'
  },
  {
    name: 'ç­¾çº¦æ¨¡å¼',
    desc: 'åˆ›ä½œè€…ä¸»å¯¼è¿è¥',
    gradient: 'linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%)',
    creatorShare: '70%',
    mcnShare: '30%',
    creatorColor: '#27ae60'
  }
]

// å¼¹å¹•é¡¹å›¾æ ‡
const getItemIcon = (index) => {
  const icons = ['âš¡', 'ğŸ’°', 'âš ï¸', 'ğŸš«', 'ğŸ“„']
  return icons[index % icons.length]
}

onMounted(() => {
  // chart1 - 2023å¹´æœ‰å­©å®¶åº­äººç¾¤çº¿ä¸Šæ¶ˆè´¹èƒ½åŠ›ï¼ˆæŠ˜çº¿+æŸ±çŠ¶ï¼‰
  if (chart1.value) {
    myChart1Instance = echarts.init(chart1.value)
    myChart1Instance.setOption({
      tooltip: {
        trigger: 'axis',
        axisPointer: { type: 'cross' }
      },
      legend: {
        data: ['æœ‰å­©å®¶åº­äººç¾¤æ´»è·ƒå æ¯”TGI', 'Zä¸–ä»£çˆ¶æ¯æ´»è·ƒå æ¯”TGI', 'æœ‰å­©å®¶åº­äººç¾¤æ´»è·ƒå æ¯”'],
        bottom: 5,
        textStyle: { fontSize: 10 }
      },
      grid: {
        left: '8%',
        right: '10%',
        bottom: '22%',
        top: '12%',
        containLabel: true
      },
      xAxis: {
        type: 'category',
        data: ['1-299å…ƒ', '300-999å…ƒ', '1000-1999å…ƒ', '2000-22999å…ƒ', '3000å…ƒä»¥ä¸Š'],
        axisLabel: { fontSize: 10, rotate: 20, interval: 0 }
      },
      yAxis: [
        {
          type: 'value',
          name: '',
          max: 100,
          axisLabel: { formatter: '{value}%', fontSize: 10 }
        },
        {
          type: 'value',
          name: '',
          max: 160,
          axisLabel: { formatter: '{value}', fontSize: 10 }
        }
      ],
      series: [
        {
          name: 'Zä¸–ä»£çˆ¶æ¯æ´»è·ƒå æ¯”TGI',
          type: 'line',
          data: [9.9, 39.0, 107.1, 153.4, 154.6],
          yAxisIndex: 1,
          smooth: true,
          lineStyle: { color: '#FFD700', width: 3 },
          itemStyle: { color: '#FFD700' },
          symbol: 'circle',
          symbolSize: 8,
          label: {
            show: true,
            position: 'top',
            fontSize: 11,
            fontWeight: 'bold',
            formatter: '{c}'
          }
        },
        {
          name: 'æœ‰å­©å®¶åº­äººç¾¤æ´»è·ƒå æ¯”TGI',
          type: 'line',
          data: [24.8, 57.7, 103.6, 134.6, 155.6],
          yAxisIndex: 1,
          smooth: true,
          lineStyle: { color: '#1E90FF', width: 2 },
          itemStyle: { color: '#1E90FF' },
          symbol: 'circle',
          symbolSize: 6,
          label: {
            show: true,
            position: 'bottom',
            fontSize: 10,
            formatter: '{c}'
          }
        },
        {
          name: 'æœ‰å­©å®¶åº­äººç¾¤æ´»è·ƒå æ¯”',
          type: 'bar',
          data: [0.0, 13.20, 44.20, 26.60, 14.70],
          yAxisIndex: 0,
          itemStyle: {
            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
              { offset: 0, color: '#FFD700' },
              { offset: 1, color: '#FFA500' }
            ])
          },
          label: {
            show: true,
            position: 'top',
            fontSize: 11,
            fontWeight: 'bold',
            formatter: '{c}%'
          },
          barWidth: '45%'
        }
      ]
    })
  }

  // chart2 - 2023å¹´æœ‰å­©å®¶åº­äººç¾¤çº¿ä¸Šæ¶ˆè´¹æ„æ„¿ï¼ˆæŠ˜çº¿+æŸ±çŠ¶ï¼‰
  if (chart2.value) {
    myChart2Instance = echarts.init(chart2.value)
    myChart2Instance.setOption({
      tooltip: {
        trigger: 'axis',
        axisPointer: { type: 'cross' }
      },
      legend: {
        data: ['æœ‰å­©å®¶åº­äººç¾¤æ´»è·ƒå æ¯”TGI', 'Zä¸–ä»£çˆ¶æ¯æ´»è·ƒå æ¯”TGI', 'æœ‰å­©å®¶åº­äººç¾¤æ´»è·ƒå æ¯”'],
        bottom: 5,
        textStyle: { fontSize: 10 }
      },
      grid: {
        left: '8%',
        right: '10%',
        bottom: '22%',
        top: '12%',
        containLabel: true
      },
      xAxis: {
        type: 'category',
        data: ['ä½', 'ä¸­', 'é«˜'],
        axisLabel: { fontSize: 12 }
      },
      yAxis: [
        {
          type: 'value',
          name: '',
          max: 100,
          axisLabel: { formatter: '{value}%', fontSize: 10 }
        },
        {
          type: 'value',
          name: '',
          max: 120,
          axisLabel: { formatter: '{value}', fontSize: 10 }
        }
      ],
      series: [
        {
          name: 'æœ‰å­©å®¶åº­äººç¾¤æ´»è·ƒå æ¯”TGI',
          type: 'line',
          data: [45.3, 104.3, 145.6],
          yAxisIndex: 1,
          smooth: true,
          lineStyle: { color: '#FFD700', width: 3 },
          itemStyle: { color: '#FFD700' },
          symbol: 'circle',
          symbolSize: 8,
          label: {
            show: true,
            position: 'top',
            fontSize: 11,
            fontWeight: 'bold',
            formatter: '{c}'
          }
        },
        {
          name: 'Zä¸–ä»£çˆ¶æ¯æ´»è·ƒå æ¯”TGI',
          type: 'line',
          data: [25.4, 105.7, 162.9],
          yAxisIndex: 1,
          smooth: true,
          lineStyle: { color: '#1E90FF', width: 2 },
          itemStyle: { color: '#1E90FF' },
          symbol: 'circle',
          symbolSize: 6,
          label: {
            show: true,
            position: 'bottom',
            fontSize: 10,
            formatter: '{c}'
          }
        },
        {
          name: 'æœ‰å­©å®¶åº­äººç¾¤æ´»è·ƒå æ¯”',
          type: 'bar',
          data: [10.0, 59.5, 30.6],
          yAxisIndex: 0,
          itemStyle: {
            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
              { offset: 0, color: '#87CEEB' },
              { offset: 1, color: '#4682B4' }
            ])
          },
          label: {
            show: true,
            position: 'top',
            fontSize: 11,
            fontWeight: 'bold',
            formatter: '{c}%'
          },
          barWidth: '45%'
        }
      ]
    })
  }

  // chart3 - æœ‰å­©å®¶åº­äººç¾¤ä¸Zä¸–ä»£çˆ¶æ¯å…´è¶£åå¥½å¯¹æ¯”ï¼ˆåˆ†ç»„æŸ±çŠ¶å›¾ + æŠ˜çº¿ï¼‰
  if (chart3.value) {
    myChart3Instance = echarts.init(chart3.value)

    const categories = ['è¾¾äººå†…å®¹', 'çŸ­è§†é¢‘', 'æ—¶å°š', 'éŸ³ä¹', 'åˆ†äº«', 'å½±è§†å‰§/ç»¼è‰º', 'æ™ºèƒ½ç”Ÿæ´»', 'æ¸¸æˆ',
      'é˜…è¯»', 'ç¾é£Ÿ', 'æ‹æ‘„/ç¾å›¾', 'å’¨è®¯', 'ç†è´¢', 'AIGC', 'æ—…æ¸¸']
    const parentData = [73.1, 64.3, 62.4, 61.3, 59.7, 54.6, 47.7, 44.5, 40.4, 32.8, 31.1, 31.0, 24.5, 22.0, 21.0]
    const zGenData = [79.9, 65.4, 60.1, 66.4, 61.2, 44.8, 41.2, 38.9, 37.1, 34.2, 27.8, 23.4, 24.5, 21.5, 18.5]

    // è®¡ç®—å æ¯”å·®å€¼ = Zä¸–ä»£çˆ¶æ¯ - æœ‰å­©å®¶åº­äººç¾¤
    const diffData = zGenData.map((val, idx) => (val - parentData[idx]).toFixed(1))

    myChart3Instance.setOption({
      tooltip: {
        trigger: 'axis',
        axisPointer: { type: 'shadow' },
        formatter: function (params) {
          let result = params[0].name + '<br/>'
          params.forEach(param => {
            result += param.marker + param.seriesName + ': ' + param.value + (param.seriesName === 'å æ¯”å·®å€¼' ? '' : '%') + '<br/>'
          })
          return result
        }
      },
      legend: {
        data: ['æœ‰å­©å®¶åº­äººç¾¤', 'Zä¸–ä»£çˆ¶æ¯', 'å æ¯”å·®å€¼'],
        top: 5,
        textStyle: { fontSize: 11 }
      },
      grid: {
        left: '8%',
        right: '8%',
        bottom: '15%',
        top: '12%',
        containLabel: true
      },
      xAxis: {
        type: 'category',
        data: categories,
        axisLabel: {
          fontSize: 10,
          rotate: 35,
          interval: 0
        }
      },
      yAxis: [
        {
          type: 'value',
          name: 'æ´»è·ƒå æ¯”',
          max: 100,
          axisLabel: {
            formatter: '{value}%',
            fontSize: 10
          },
          splitLine: {
            lineStyle: {
              type: 'dashed',
              color: '#eee'
            }
          }
        },
        {
          type: 'value',
          name: 'å æ¯”å·®å€¼',
          min: -10,
          max: 20,
          axisLabel: {
            formatter: '{value}',
            fontSize: 10
          },
          splitLine: {
            show: false
          }
        }
      ],
      series: [
        {
          name: 'æœ‰å­©å®¶åº­äººç¾¤',
          type: 'bar',
          yAxisIndex: 0,
          data: parentData,
          itemStyle: {
            color: '#5470c6'
          },
          label: {
            show: true,
            position: 'top',
            fontSize: 9,
            formatter: '{c}%'
          },
          barWidth: '20%'
        },
        {
          name: 'Zä¸–ä»£çˆ¶æ¯',
          type: 'bar',
          yAxisIndex: 0,
          data: zGenData,
          itemStyle: {
            color: '#fac858'
          },
          label: {
            show: true,
            position: 'top',
            fontSize: 9,
            formatter: '{c}%'
          },
          barWidth: '20%'
        },
        {
          name: 'å æ¯”å·®å€¼',
          type: 'line',
          yAxisIndex: 1,
          data: diffData,
          smooth: true,
          lineStyle: {
            color: '#ee6666',
            width: 3,
            type: 'solid'
          },
          itemStyle: {
            color: '#ee6666',
            borderWidth: 2
          },
          symbol: 'circle',
          symbolSize: 8,
          label: {
            show: true,
            position: 'top',
            fontSize: 10,
            fontWeight: 'bold',
            color: '#ee6666',
            formatter: function (params) {
              return params.value > 0 ? '+' + params.value : params.value
            }
          },
          markLine: {
            silent: true,
            symbol: 'none',
            data: [
              {
                yAxis: 0,
                lineStyle: {
                  color: '#999',
                  type: 'dashed',
                  width: 1
                },
                label: {
                  show: false
                }
              }
            ]
          }
        }
      ]
    })
  }
})

onUnmounted(() => {
  if (myChart1Instance) myChart1Instance.dispose()
  if (myChart2Instance) myChart2Instance.dispose()
  if (myChart3Instance) myChart3Instance.dispose()
})
</script>

<style scoped>
/* ==================== å›¾è¡¨å¸ƒå±€æ ·å¼ ==================== */
.charts-row {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20px;
  margin: 25px 0;
}

.chart-item {
  background: white;
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
}

.chart-full {
  background: white;
  border-radius: 12px;
  padding: 20px;
  margin: 25px 0;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
}

.chart-title {
  font-size: 1.1rem;
  color: #333;
  margin: 0 0 15px 0;
  font-weight: 600;
  text-align: center;
}

.chart-container-small {
  width: 100%;
  height: 320px;
}

.chart-container-large {
  width: 100%;
  height: 380px;
}

.chart-note {
  font-size: 0.85rem;
  color: #666;
  margin: 10px 0 0 0;
  line-height: 1.6;
  text-align: left;
}

/* ==================== å›¾è¡¨æ³¨é‡Šç›’å­ ==================== */
.chart-note-box {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border: 2px solid #dee2e6;
  border-radius: 12px;
  padding: 20px 25px;
  margin-top: 20px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.note-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 15px;
  padding-bottom: 12px;
  border-bottom: 2px solid #dee2e6;
}

.note-icon {
  font-size: 1.3rem;
}

.note-title {
  font-size: 1.1rem;
  font-weight: 700;
  color: #495057;
  letter-spacing: 0.5px;
}

.note-content {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 15px;
}

.note-item {
  display: flex;
  gap: 10px;
  align-items: flex-start;
}

.note-label {
  flex-shrink: 0;
  width: 22px;
  height: 22px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  font-weight: 700;
  font-size: 0.85rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 6px rgba(102, 126, 234, 0.3);
}

.note-text {
  flex: 1;
  font-size: 0.95rem;
  line-height: 1.8;
  color: #495057;
  word-break: keep-all;
  overflow-wrap: break-word;
}

.note-text strong {
  color: #667eea;
  font-weight: 600;
}

.note-source {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.08) 0%, rgba(118, 75, 162, 0.08) 100%);
  border-radius: 8px;
  border-left: 4px solid #667eea;
}

.source-icon {
  font-size: 1.2rem;
  flex-shrink: 0;
}

.source-text {
  font-size: 0.9rem;
  color: #495057;
  line-height: 1.6;
}

.source-highlight {
  color: #667eea;
  font-weight: 700;
  font-size: 1rem;
}

/* ==================== æ•°æ®é«˜äº®æ ·å¼ ==================== */
.data-highlight {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 25px 30px;
  border-radius: 15px;
  color: white;
  margin: 25px 0;
  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
}

.data-highlight p {
  margin: 12px 0;
  font-size: 1.1rem;
  line-height: 1.8;
  word-break: keep-all;
  overflow-wrap: break-word;
}

.data-highlight .big {
  font-size: 1.8rem;
  font-weight: 800;
  color: #ffd700;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

/* ==================== æµé‡å…¬å¼ ==================== */
.formula-box {
  background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
  padding: 20px;
  border-radius: 12px;
  margin: 20px 0;
  border-left: 5px solid #e17055;
  box-shadow: 0 4px 15px rgba(253, 203, 110, 0.4);
}

.formula {
  font-size: 1.15rem;
  font-weight: 700;
  color: #2d3436;
  margin: 0;
  text-align: center;
  letter-spacing: 0.5px;
}

/* ==================== MCNåˆ†æˆå›¾è¡¨ ==================== */
.mcn-revenue-chart {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin: 25px 0;
}

.revenue-model {
  background: white;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  transition: all 0.3s;
}

.revenue-model:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
}

.model-header {
  padding: 20px;
  color: white;
  text-align: center;
}

.model-header h5 {
  margin: 0 0 8px 0;
  font-size: 1.3rem;
  font-weight: 700;
}

.model-desc {
  margin: 0;
  font-size: 0.95rem;
  opacity: 0.95;
}

.revenue-split {
  padding: 20px;
}

.split-bar {
  display: flex;
  height: 50px;
  border-radius: 25px;
  overflow: hidden;
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.1);
}

:deep(.creator-share),
:deep(.mcn-share) {
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 700;
  font-size: 1.05rem;
  transition: all 0.3s;
  position: relative;
  animation: scaleIn 0.6s ease forwards;
}

@keyframes scaleIn {
  from {
    transform: scaleX(0);
  }

  to {
    transform: scaleX(1);
  }
}

.revenue-model:hover :deep(.creator-share),
.revenue-model:hover :deep(.mcn-share) {
  filter: brightness(1.1);
}

/* ==================== è­¦å‘Šæ ·å¼ ==================== */
.warning {
  background: linear-gradient(135deg, #fff5e6 0%, #ffe5cc 100%);
  border-left: 4px solid #f39c12;
  padding: 15px 20px;
  margin: 25px 0 15px;
  border-radius: 8px;
  color: #856404;
  font-weight: 600;
  box-shadow: 0 4px 12px rgba(243, 156, 18, 0.2);
}

ul {
  list-style: none;
  padding-left: 0;
}

ul li {
  position: relative;
  padding-left: 30px;
  margin: 12px 0;
  line-height: 1.8;
  color: #2c3e50;
  word-break: keep-all;
  overflow-wrap: break-word;
}

ul li::before {
  content: 'â–¸';
  position: absolute;
  left: 15px;
  color: #667eea;
  font-weight: bold;
}

.penalty-box {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  border: 2px solid #e74c3c;
  padding: 25px 30px;
  margin: 30px 0;
  border-radius: 16px;
  box-shadow: 0 8px 25px rgba(231, 76, 60, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  overflow: hidden;
  position: relative;
}

.penalty-box::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, #e74c3c 0%, #ff6b6b 50%, #e74c3c 100%);
  background-size: 200% 100%;
  animation: shimmer 3s linear infinite;
}

@keyframes shimmer {
  0% {
    background-position: 0% 0%;
  }

  100% {
    background-position: 200% 0%;
  }
}

.penalty-header {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px;
  margin-bottom: 12px;
}

.warning-icon {
  font-size: 1.8rem;
  animation: pulse-warning 2s ease-in-out infinite;
}

@keyframes pulse-warning {

  0%,
  100% {
    transform: scale(1);
    opacity: 1;
  }

  50% {
    transform: scale(1.15);
    opacity: 0.8;
  }
}

.penalty-box h4 {
  color: #ff6b6b;
  margin: 0;
  font-size: 1.3rem;
  font-weight: 700;
  text-shadow: 0 2px 8px rgba(255, 107, 107, 0.5);
}

.penalty-hint {
  text-align: center;
  color: rgba(255, 255, 255, 0.6);
  font-size: 0.85rem;
  margin: 0 0 15px 0;
  font-style: italic;
}

/* å¼¹å¹•å®¹å™¨ */
.danmaku-container {
  position: relative;
  height: 220px;
  overflow: hidden;
  background: linear-gradient(180deg, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0.6) 100%);
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.3);
}

.danmaku-track {
  position: absolute;
  width: 100%;
  height: 65px;
  overflow: hidden;
}

.track-1 {
  top: 8px;
}

.track-2 {
  top: 78px;
}

.track-3 {
  top: 148px;
}

.danmaku-content {
  display: inline-block;
  white-space: nowrap;
  animation: danmaku-scroll 40s linear infinite;
  padding-left: 100%;
  will-change: transform;
}

@keyframes danmaku-scroll {
  0% {
    transform: translateX(0);
  }

  100% {
    transform: translateX(-50%);
  }
}

.danmaku-container:hover .danmaku-content {
  animation-play-state: paused;
}

.danmaku-item {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: #fff;
  font-size: 1rem;
  padding: 12px 20px;
  margin-right: 40px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.08) 100%);
  border-radius: 28px;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.3);
  position: relative;
  white-space: nowrap;
  transition: all 0.3s ease;
}

.danmaku-item::before {
  content: '';
  position: absolute;
  inset: -1px;
  border-radius: 28px;
  padding: 1px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0));
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: exclude;
  pointer-events: none;
}

/* ä¸åŒæ ·å¼çš„å¼¹å¹•é¡¹ */
.item-style-1 {
  background: linear-gradient(135deg, rgba(231, 76, 60, 0.2) 0%, rgba(231, 76, 60, 0.1) 100%);
  border-color: rgba(231, 76, 60, 0.4);
}

.item-style-2 {
  background: linear-gradient(135deg, rgba(255, 107, 107, 0.2) 0%, rgba(255, 107, 107, 0.1) 100%);
  border-color: rgba(255, 107, 107, 0.4);
}

.item-style-3 {
  background: linear-gradient(135deg, rgba(255, 71, 87, 0.2) 0%, rgba(255, 71, 87, 0.1) 100%);
  border-color: rgba(255, 71, 87, 0.4);
}

.danmaku-container:hover .danmaku-item {
  transform: scale(1.05);
}

.item-icon {
  font-size: 1.2rem;
  flex-shrink: 0;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.danmaku-text {
  display: inline;
  color: rgba(255, 255, 255, 0.95);
  font-weight: 400;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.red-text {
  display: inline-block;
  color: #ff4757;
  font-weight: 900;
  font-size: 1.35rem;
  text-shadow: 0 0 12px rgba(255, 71, 87, 0.9),
    0 0 24px rgba(255, 71, 87, 0.6),
    0 2px 4px rgba(0, 0, 0, 0.5);
  padding: 0 10px;
  animation: glow-intense 2.5s ease-in-out infinite;
  letter-spacing: 1px;
  position: relative;
}

.red-text::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 50%;
  transform: translateX(-50%);
  width: 80%;
  height: 2px;
  background: linear-gradient(90deg, transparent, #ff4757, transparent);
  opacity: 0.6;
}

@keyframes glow-intense {

  0%,
  100% {
    text-shadow: 0 0 12px rgba(255, 71, 87, 0.9),
      0 0 24px rgba(255, 71, 87, 0.6),
      0 2px 4px rgba(0, 0, 0, 0.5);
    transform: scale(1);
  }

  50% {
    text-shadow: 0 0 18px rgba(255, 71, 87, 1),
      0 0 35px rgba(255, 71, 87, 0.8),
      0 0 50px rgba(255, 71, 87, 0.6),
      0 2px 4px rgba(0, 0, 0, 0.5);
    transform: scale(1.05);
  }
}

/* ç»“æŸè¯­æ ·å¼ */
.conclusion-text {
  margin-top: 30px;
  padding: 20px 30px;
  background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
  border-left: 5px solid #ff9800;
  border-radius: 12px;
  font-size: 1.15rem;
  font-weight: 600;
  color: #e65100;
  text-align: center;
  box-shadow: 0 4px 15px rgba(255, 152, 0, 0.2);
  letter-spacing: 0.5px;
  line-height: 1.8;
  word-break: keep-all;
  overflow-wrap: break-word;
}

/* ==================== å“åº”å¼è®¾è®¡ ==================== */
@media (max-width: 768px) {
  .charts-row {
    grid-template-columns: 1fr;
  }

  .chart-container-small {
    height: 280px;
  }

  .chart-container-large {
    height: 320px;
  }

  .chart-note-box {
    padding: 18px 20px;
    margin-top: 18px;
  }

  .note-header {
    margin-bottom: 12px;
    padding-bottom: 10px;
  }

  .note-icon {
    font-size: 1.2rem;
  }

  .note-title {
    font-size: 1rem;
  }

  .note-content {
    gap: 10px;
    margin-bottom: 12px;
  }

  .note-label {
    width: 20px;
    height: 20px;
    font-size: 0.8rem;
  }

  .note-text {
    font-size: 0.9rem;
    line-height: 1.7;
  }

  .note-source {
    padding: 10px 14px;
  }

  .source-icon {
    font-size: 1.1rem;
  }

  .source-text {
    font-size: 0.85rem;
  }

  .source-highlight {
    font-size: 0.95rem;
  }

  .data-highlight .big {
    font-size: 1.4rem;
  }

  .formula {
    font-size: 1rem;
  }

  .split-bar {
    height: 40px;
  }

  :deep(.creator-share),
  :deep(.mcn-share) {
    font-size: 0.9rem;
  }

  .model-header h5 {
    font-size: 1.1rem;
  }

  .penalty-box {
    padding: 20px 18px;
  }

  .penalty-header {
    gap: 12px;
  }

  .warning-icon {
    font-size: 1.5rem;
  }

  .penalty-box h4 {
    font-size: 1.2rem;
  }

  .penalty-hint {
    font-size: 0.8rem;
    margin-bottom: 12px;
  }

  .danmaku-container {
    height: 170px;
  }

  .danmaku-track {
    height: 52px;
  }

  .track-1 {
    top: 6px;
  }

  .track-2 {
    top: 60px;
  }

  .track-3 {
    top: 114px;
  }

  .danmaku-item {
    font-size: 0.9rem;
    padding: 10px 16px;
    margin-right: 30px;
    gap: 6px;
  }

  .item-icon {
    font-size: 1rem;
  }

  .red-text {
    font-size: 1.15rem;
    padding: 0 6px;
  }

  .conclusion-text {
    font-size: 1rem;
    padding: 18px 20px;
  }
}

@media (max-width: 480px) {
  .chart-note-box {
    padding: 16px 15px;
    margin-top: 15px;
    border-radius: 10px;
  }

  .note-header {
    gap: 8px;
    margin-bottom: 10px;
    padding-bottom: 8px;
  }

  .note-icon {
    font-size: 1.1rem;
  }

  .note-title {
    font-size: 0.95rem;
  }

  .note-content {
    gap: 8px;
    margin-bottom: 10px;
  }

  .note-label {
    width: 18px;
    height: 18px;
    font-size: 0.75rem;
  }

  .note-text {
    font-size: 0.85rem;
    line-height: 1.8;
  }

  .note-text strong {
    font-size: 0.85rem;
  }

  .note-source {
    padding: 10px 12px;
    gap: 6px;
    border-radius: 6px;
  }

  .source-icon {
    font-size: 1rem;
  }

  .source-text {
    font-size: 0.8rem;
    line-height: 1.6;
  }

  .source-highlight {
    font-size: 0.85rem;
  }

  .penalty-box {
    padding: 18px 15px;
    margin: 25px 0;
  }

  .penalty-header {
    gap: 10px;
  }

  .warning-icon {
    font-size: 1.3rem;
  }

  .penalty-box h4 {
    font-size: 1.1rem;
  }

  .penalty-hint {
    font-size: 0.75rem;
    margin-bottom: 10px;
  }

  .danmaku-container {
    height: 150px;
  }

  .danmaku-track {
    height: 46px;
  }

  .track-1 {
    top: 4px;
  }

  .track-2 {
    top: 52px;
  }

  .track-3 {
    top: 100px;
  }

  .danmaku-content {
    animation-duration: 35s;
  }

  .danmaku-item {
    font-size: 0.85rem;
    padding: 8px 14px;
    margin-right: 25px;
    gap: 5px;
    border-radius: 24px;
  }

  .item-icon {
    font-size: 0.9rem;
  }

  .danmaku-text {
    font-size: 0.85rem;
  }

  .red-text {
    font-size: 1.05rem;
    padding: 0 5px;
    letter-spacing: 0.5px;
  }

  .red-text::after {
    height: 1.5px;
  }

  .conclusion-text {
    font-size: 0.95rem;
    padding: 16px 16px;
    line-height: 2;
  }
}
</style>