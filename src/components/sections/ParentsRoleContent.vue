<template>
  <div>
    <h3>çˆ¶æ¯ï¼šè®°å½•æˆé•¿è¿˜æ˜¯è°‹å–åˆ©ç›Šï¼Ÿ</h3>
    <p>"åªæ˜¯æƒ³åˆ†äº«ä¸€ä¸‹"</p>
    <p>æ˜¯å¾ˆå¤šå®¶é•¿åœ¨ç¤¾äº¤åª’ä½“"æ™’å¨ƒ"çš„åˆè¡·ã€‚è®¸å¤šè´¦å·ç”±å®¶é•¿è¿è¥ï¼Œæˆ–æ˜¯ä»¥çˆ¶æ¯è§†è§’æ‹æ‘„å­©å­çš„æœ‰è¶£ç¬é—´ï¼Œæˆ–æ˜¯ä»¥å­©å­è§†è§’å¼€è®¾å„¿ç«¥è´¦å·ï¼Œä½†æ˜¯åœ¨æµé‡è‡³ä¸Šã€åˆ©ç›Šè¯±æƒ‘é¢å‰ï¼Œè¿™ä»½åˆ†äº«å¯èƒ½å°±ä¼šå˜äº†å‘³ã€‚</p>

    <!-- åœ°å›¾å’Œå…»è‚²æˆæœ¬å·¦å³å¸ƒå±€ -->
    <div class="cost-layout">
      <!-- å·¦ä¾§ï¼šåœ°å›¾ -->
      <div class="map-section">
        <h4>å„åœ°å…»è‚²æˆæœ¬äº¤äº’åœ°å›¾</h4>
        <div id="costMap" class="cost-map-chart"></div>
        <p class="chart-source">æ•°æ®æ¥æºï¼šã€Šä¸­å›½ç”Ÿè‚²æˆæœ¬æŠ¥å‘Š2024ã€‹</p>
      </div>

      <!-- å³ä¾§ï¼šå…»è‚²æˆæœ¬ -->
      <div class="cost-section">
        <h4>å…»è‚²æˆæœ¬</h4>
        <div class="cost-info-box">
          <div class="child-silhouette">
            <span class="silhouette-value">85ä¸‡</span>
          </div>
          <div class="map-note">å„åœ°0-17å²å­©å­å¹³å‡å…»è‚²æˆæœ¬ï¼ˆæ¸¯æ¾³å°æœªç»Ÿè®¡ï¼‰</div>
          <div class="cost-legend">
            <span class="legend-item"><span class="legend-color" style="background: #fee5d9"></span>30-40ä¸‡</span>
            <span class="legend-item"><span class="legend-color" style="background: #fcae91"></span>40-50ä¸‡</span>
            <span class="legend-item"><span class="legend-color" style="background: #fb6a4a"></span>50-60ä¸‡</span>
            <span class="legend-item"><span class="legend-color" style="background: #de2d26"></span>60-80ä¸‡</span>
            <span class="legend-item"><span class="legend-color" style="background: #a50f15"></span>80ä¸‡ä»¥ä¸Š</span>
          </div>
        </div>
      </div>
    </div>

    <div class="data-highlight">
      <p>å…¨å›½å®¶åº­0-17å²å­©å­çš„å…»è‚²æˆæœ¬å¹³å‡ä¸º<span class="big">53.8ä¸‡å…ƒ</span></p>
      <p>è€Œä»…2023å¹´7æœˆå†…ï¼Œå„¿ç«¥åšä¸»çš„å¹³å‡ç´¯è®¡é”€å”®é¢å°±è¶…è¿‡<span class="big">85ä¸‡å…ƒ</span>ï¼Œçº¦æ˜¯å…»è‚²æˆæœ¬çš„ä¸¤å€ã€‚</p>
    </div>

    <h4 style="margin-top: 30px; color: #2c3e50; font-size: 1.4rem;">å¤´éƒ¨ç½‘çº¢æœˆé”€å”®é¢è¶‹åŠ¿</h4>
    <div ref="salesChart" class="sales-chart"></div>

    <p style="margin-top: 20px;">
      ä»¥ä¸€å¤´éƒ¨äº²å­ç±»å‹ç½‘çº¢åˆ†æï¼Œå…¶è¿‘ä¸€ä¸ªæœˆé”€å”®é¢æœ€é«˜å¯è¾¾2500ä¸‡-5000ä¸‡ã€‚æ®ç¬¬ä¸‰æ–¹æ•°æ®ï¼Œå„¿ç«¥ç½‘çº¢@ç‘¶ä¸€***å…¶çŸ­è§†é¢‘ç¤¾äº¤åª’ä½“è´¦å·å¹´å¹¿å‘Šæ”¶å…¥æˆ–è¶…1650ä¸‡å…ƒï¼Œè¿œè¶…90%çš„åŒç²‰ä¸é‡çº§è¾¾äººã€‚â€‹ï¼ˆã€Šé½é²æ™šæŠ¥ã€‹ï¼‰</p>

    <!-- å„¿ç«¥è®¤çŸ¥å‘å±•çš„çœŸç›¸ -->
    <div class="piaget-section">
      <h3 class="piaget-title">å„¿ç«¥è®¤çŸ¥å‘å±•çš„çœŸç›¸</h3>
      <p class="piaget-intro">
        çš®äºšæ°ç†è®ºæ¸…æ™°è¡¨æ˜ï¼Œ7å²ä»¥ä¸‹å„¿ç«¥æ— æ³•ç†è§£æŠ½è±¡å•†ä¸šè¡Œä¸ºï¼Œ11å²ä»¥ä¸‹éš¾ä»¥çœŸæ­£è‡ªä¸»å†³ç­–ã€‚å½“å„¿ç«¥è´¦å·å±•ç¤º"æƒ³çº¢""çˆ±è¡¨æ¼”"æ—¶ï¼ŒèƒŒåå¾€å¾€æ˜¯çˆ¶æ¯å°†è‡ªèº«ä»·å€¼è§‚å«æ¥ç»™è®¤çŸ¥èƒ½åŠ›å—é™çš„å­©å­ã€‚
      </p>

      <div class="piaget-container">
        <div v-for="(stage, index) in piagetStages" :key="index" class="piaget-stage" @mouseenter="currentStage = index"
          @mouseleave="currentStage = null">
          <div class="stage-figure" :style="{ height: stage.height }">
            <img v-if="stage.image" :src="stage.image" alt="é˜¶æ®µå›¾ç‰‡" class="stage-photo" />
            <div class="figure-icon" v-else>ğŸ‘¶</div>
          </div>
          <div class="stage-info">
            <p class="stage-age">{{ stage.age }}</p>
            <h4 class="stage-name">{{ stage.name }}</h4>
          </div>
          <transition name="slide-up">
            <div v-if="currentStage === index" class="stage-detail">
              <p>{{ stage.detail }}</p>
            </div>
          </transition>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from 'vue'
import * as echarts from 'echarts'

// ==================== Piaget é˜¶æ®µæ•°æ® ====================
const currentStage = ref(null)
const piagetStages = [
  {
    name: 'æ„ŸçŸ¥è¿åŠ¨é˜¶æ®µ',
    age: '0-2å²',
    height: '180px',
    detail: 'å©´å„¿é€šè¿‡çœ‹ã€æ‘¸ã€åƒã€æŠ“æ¥è®¤è¯†ä¸–ç•Œï¼Œå°±åƒ"ç”¨æ‰‹å’Œå˜´æ€è€ƒ"ã€‚è¿™ä¸ªé˜¶æ®µçš„å­©å­è¿"è—çŒ«çŒ«"éƒ½éš¾ä»¥ç†è§£ï¼Œæ›´æ— æ³•ç†è§£ç½‘ç»œçš„æ„ä¹‰ï¼Œä»–ä»¬çš„ä¸€åˆ‡è¡Œä¸ºä¾èµ–å³æ—¶ååº”ã€‚',
    image: new URL('@/assets/images/11.jpg', import.meta.url).href
  },
  {
    name: 'å‰è¿ç®—é˜¶æ®µ',
    age: '2-7å²',
    height: '250px',
    detail: 'å­©å­å¼€å§‹ç”¨è¯­è¨€å’Œç¬¦å·è¡¨è¾¾ï¼Œä½†æ€ç»´å……æ»¡å±€é™æ€§ï¼šè®¤ä¸ºæœˆäº®ä¼šè·Ÿç€è‡ªå·±èµ°ï¼Œæ— æ³•ç†è§£ä»–äººè§†è§’ã€‚è§‰å¾—ç©å…·æœ‰ç”Ÿå‘½ï¼Œä¼šå’Œå¨ƒå¨ƒèŠå¤©ã€‚å¦‚æœæœæ±ä»é«˜æ¯å€’è¿›çŸ®æ¯ï¼Œä»–ä»¬ä¼šåšæŒçŸ®æ¯"å˜å°‘äº†"ï¼Œæ— æ³•ç†è§£å®ˆæ’æ¦‚å¿µã€‚',
    image: new URL('@/assets/images/12.jpg', import.meta.url).href
  },
  {
    name: 'å…·ä½“è¿ç®—é˜¶æ®µ',
    age: '7-11å²',
    height: '320px',
    detail: 'å­©å­å¼€å§‹æœ‰é€»è¾‘ï¼Œä½†å¿…é¡»ä¾èµ–å…·ä½“ä¾‹å­ã€‚èƒ½ç†è§£"Aæ¯”Bé«˜ï¼ŒBæ¯”Cé«˜ï¼Œæ‰€ä»¥Aæ¯”Cé«˜"ï¼Œä½†æ— æ³•å›ç­”"å¦‚æœäººç±»ä¸ç”¨åƒé¥­ä¼šæ€æ ·"è¿™ç§æŠ½è±¡å‡è®¾ã€‚ä»–ä»¬ä¸¥æ ¼æŒ‰è§„åˆ™è¡Œäº‹ï¼Œè®¤ä¸º"è§„åˆ™ä¸èƒ½å˜"ã€‚',
    image: new URL('@/assets/images/13.jpg', import.meta.url).href
  },
  {
    name: 'å½¢å¼è¿ç®—é˜¶æ®µ',
    age: '11å²ä»¥å',
    height: '390px',
    detail: 'é’å°‘å¹´é€æ¸èƒ½è¿›è¡Œå‡è®¾æ¨ç†ï¼Œæ¯”å¦‚è®¨è®º"å¦‚æœåœ°çƒæ²¡æœ‰é‡åŠ›"ï¼Œä½†è¿™ç±»èƒ½åŠ›ä»éœ€æ•™è‚²å¼•å¯¼æ‰èƒ½æˆç†Ÿã€‚æ­¤å‰ï¼Œå„¿ç«¥å¯¹ç½‘ç»œé£é™©ã€é•¿æœŸåæœç¼ºä¹é¢„åˆ¤åŠ›ã€‚',
    image: new URL('@/assets/images/14.jpg', import.meta.url).href
  }
]

// ==================== æ•°æ®å¯¼å…¥ ====================
const costRefImg = new URL('@/assets/images/cost.png', import.meta.url).href

// é”€å”®é¢æ—¶é—´çº¿æ•°æ®
const salesData = [
  { date: '9.26', sales: '1-2.5ä¸‡', revenueMin: 250, revenueMax: 500, revenueAvg: 375 },
  { date: '10.9', sales: '1-2.5ä¸‡', revenueMin: 500, revenueMax: 750, revenueAvg: 625 },
  { date: '10.13', sales: '5-7.5ä¸‡', revenueMin: 1000, revenueMax: 2500, revenueAvg: 1750 },
  { date: '10.15', sales: '10-25ä¸‡', revenueMin: 2500, revenueMax: 5000, revenueAvg: 3750 },
  { date: '10.17', sales: '10-25ä¸‡', revenueMin: 1000, revenueMax: 2500, revenueAvg: 1750 },
  { date: '10.19', sales: '5-7.5ä¸‡', revenueMin: 2500, revenueMax: 5000, revenueAvg: 3750 },
  { date: '10.22', sales: '10-25ä¸‡', revenueMin: 500, revenueMax: 750, revenueAvg: 625 },
  { date: '10.24', sales: '10-25ä¸‡', revenueMin: 2500, revenueMax: 5000, revenueAvg: 3750 }
]

const salesChart = ref(null)
let salesChartInstance = null

onMounted(() => {
  // åˆå§‹åŒ–é”€å”®é¢æŠ˜çº¿å›¾
  if (salesChart.value) {
    salesChartInstance = echarts.init(salesChart.value)

    const dates = salesData.map(item => item.date)
    const avgRevenues = salesData.map(item => item.revenueAvg)
    const minRevenues = salesData.map(item => item.revenueMin)
    const maxRevenues = salesData.map(item => item.revenueMax)

    // è½¬æ¢é”€é‡æ•°æ®ï¼šå°†"1-2.5ä¸‡"è½¬æ¢ä¸ºæ•°å€¼ï¼ˆå–ä¸­é—´å€¼ï¼‰
    const salesVolumes = salesData.map(item => {
      const match = item.sales.match(/(\d+\.?\d*)-(\d+\.?\d*)/)
      if (match) {
        const min = parseFloat(match[1])
        const max = parseFloat(match[2])
        return (min + max) / 2
      }
      return 0
    })

    salesChartInstance.setOption({
      tooltip: {
        trigger: 'axis',
        formatter: function (params) {
          const dataIndex = params[0].dataIndex
          const item = salesData[dataIndex]
          let result = `${item.date}<br/>`
          params.forEach(param => {
            if (param.seriesName === 'é”€é‡ï¼ˆä¸‡ä»¶ï¼‰') {
              result += `${param.marker}${param.seriesName}: ${item.sales}<br/>`
            } else {
              result += `${param.marker}${param.seriesName}: ${item.revenueMin}-${item.revenueMax}ä¸‡å…ƒ<br/>`
            }
          })
          return result
        },
        backgroundColor: 'rgba(50, 50, 50, 0.9)',
        borderColor: '#667eea',
        borderWidth: 2,
        textStyle: {
          color: '#fff'
        }
      },
      grid: {
        left: '10%',
        right: '10%',
        bottom: '15%',
        top: '15%',
        containLabel: true
      },
      xAxis: {
        type: 'category',
        data: dates,
        axisLabel: {
          fontSize: 12,
          color: '#666'
        },
        axisLine: {
          lineStyle: {
            color: '#ddd'
          }
        }
      },
      yAxis: [
        {
          type: 'value',
          name: 'é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰',
          position: 'left',
          axisLabel: {
            formatter: '{value}',
            fontSize: 12,
            color: '#666'
          },
          splitLine: {
            lineStyle: {
              type: 'dashed',
              color: '#eee'
            }
          }
        },
        {
          type: 'value',
          name: 'é”€é‡ï¼ˆä¸‡ä»¶ï¼‰',
          position: 'right',
          axisLabel: {
            formatter: '{value}',
            fontSize: 12,
            color: '#666'
          },
          splitLine: {
            show: false
          }
        }
      ],
      series: [
        {
          name: 'é”€å”®é¢',
          type: 'line',
          yAxisIndex: 0,
          data: avgRevenues,
          smooth: true,
          lineStyle: {
            color: '#667eea',
            width: 3
          },
          itemStyle: {
            color: '#667eea',
            borderWidth: 2,
            borderColor: '#fff'
          },
          symbol: 'circle',
          symbolSize: 8,
          label: {
            show: true,
            position: 'top',
            fontSize: 11,
            fontWeight: 'bold',
            color: '#667eea',
            formatter: '{c}'
          },
          areaStyle: {
            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
              { offset: 0, color: 'rgba(102, 126, 234, 0.3)' },
              { offset: 1, color: 'rgba(102, 126, 234, 0.05)' }
            ])
          }
        },
        {
          name: 'é”€é‡ï¼ˆä¸‡ä»¶ï¼‰',
          type: 'line',
          yAxisIndex: 1,
          data: salesVolumes,
          smooth: true,
          lineStyle: {
            color: '#ff6b6b',
            width: 3
          },
          itemStyle: {
            color: '#ff6b6b',
            borderWidth: 2,
            borderColor: '#fff'
          },
          symbol: 'circle',
          symbolSize: 8,
          label: {
            show: true,
            position: 'bottom',
            fontSize: 11,
            fontWeight: 'bold',
            color: '#ff6b6b',
            formatter: '{c}'
          }
        }
      ],
      legend: {
        data: ['é”€å”®é¢', 'é”€é‡ï¼ˆä¸‡ä»¶ï¼‰'],
        bottom: 10,
        textStyle: {
          fontSize: 12
        }
      }
    })
  }
})

onUnmounted(() => {
  if (salesChartInstance) {
    salesChartInstance.dispose()
  }
})
</script>

<style scoped>
/* ==================== æ•°æ®é«˜äº®æ ·å¼ ==================== */
.data-highlight {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 25px 30px;
  border-radius: 15px;
  color: white;
  margin: 25px 0;
  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
}

.data-highlight p {
  margin: 12px 0;
  font-size: 1.1rem;
  line-height: 1.8;
  word-break: keep-all;
  overflow-wrap: break-word;
}

.data-highlight .big {
  font-size: 1.8rem;
  font-weight: 800;
  color: #ffd700;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

/* ==================== åœ°å›¾å’Œå…»è‚²æˆæœ¬å·¦å³å¸ƒå±€ ==================== */
.cost-layout {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 30px;
  margin: 30px 0;
}

.map-section,
.cost-section {
  background: white;
  padding: 25px;
  border-radius: 16px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  transition: transform 0.3s, box-shadow 0.3s;
}

.map-section:hover,
.cost-section:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
}

.map-section h4,
.cost-section h4 {
  color: #2c3e50;
  font-size: 1.4rem;
  margin-bottom: 20px;
  text-align: center;
  font-weight: 700;
}

.cost-map-chart {
  width: 100%;
  height: 500px;
  background: #f8f9fa;
  border-radius: 12px;
}

.chart-source {
  text-align: center;
  color: #999;
  margin-top: 10px;
  font-size: 0.9rem;
}

.cost-info-box {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
}

.child-silhouette {
  width: 120px;
  height: 180px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 60px 60px 120px 120px;
  margin: 0 auto 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
  position: relative;
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {

  0%,
  100% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.05);
  }
}

.silhouette-value {
  font-size: 2rem;
  font-weight: 800;
  color: white;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

.map-note {
  text-align: center;
  color: #555;
  font-size: 0.95rem;
  margin-bottom: 15px;
}

.cost-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 15px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.9rem;
  color: #555;
}

.legend-color {
  width: 20px;
  height: 20px;
  border-radius: 4px;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

/* ==================== é”€å”®é¢æŠ˜çº¿å›¾ ==================== */
.sales-chart {
  width: 100%;
  height: 400px;
  background: white;
  border-radius: 16px;
  margin: 20px 0;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  padding: 20px;
}

/* ==================== å…»è‚²æˆæœ¬å›¾ç‰‡ ==================== */
.cost-image-wrapper {
  width: 100%;
  margin-top: 15px;
  text-align: center;
}

.cost-ref-image {
  max-width: 100%;
  height: auto;
  border-radius: 12px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
}

/* ==================== å“åº”å¼è®¾è®¡ ==================== */
@media (max-width: 1024px) {
  .cost-layout {
    grid-template-columns: 1fr;
  }

  .cost-map-chart {
    height: 400px;
  }
}

@media (max-width: 768px) {
  .data-highlight .big {
    font-size: 1.4rem;
  }

  .sales-chart {
    height: 320px;
    padding: 15px;
  }

  .map-section,
  .cost-section {
    padding: 20px;
  }

  .cost-map-chart {
    height: 350px;
  }

  .child-silhouette {
    width: 100px;
    height: 150px;
  }

  .silhouette-value {
    font-size: 1.6rem;
  }

  .cost-legend {
    flex-direction: column;
    align-items: flex-start;
  }

  .piaget-container {
    gap: 25px;
  }

  .piaget-stage {
    max-width: 100%;
  }

  .stage-detail {
    width: 280px;
  }
}

/* ==================== Piaget é˜¶æ®µæ ·å¼ ==================== */
.piaget-section {
  margin-top: 60px;
  padding: 40px 30px;
  background: linear-gradient(135deg, rgba(255, 236, 210, 0.4) 0%, rgba(252, 182, 159, 0.4) 100%);
  border-radius: 20px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
}

.piaget-title {
  color: #2c3e50;
  font-size: 1.6rem;
  font-weight: 700;
  text-align: center;
  margin: 0 0 20px 0;
}

.piaget-intro {
  color: #555;
  font-size: 1rem;
  line-height: 1.8;
  text-align: center;
  max-width: 900px;
  margin: 0 auto 40px;
  padding: 0 20px;
  word-break: keep-all;
  overflow-wrap: break-word;
}

.piaget-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 35px;
  align-items: end;
  max-width: 1100px;
  margin: 0 auto;
  padding: 20px 0;
}

.piaget-stage {
  max-width: 360px;
  margin: 0 auto;
  position: relative;
  cursor: pointer;
  transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.piaget-stage:hover {
  transform: translateY(-12px);
}

.stage-figure {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 50% 50% 20px 20px;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding-bottom: 20px;
  transition: all 0.4s ease;
  position: relative;
  overflow: hidden;
}

.piaget-stage:hover .stage-figure {
  box-shadow: 0 16px 45px rgba(102, 126, 234, 0.5);
  transform: scale(1.04);
}

.stage-photo {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  object-position: center bottom;
  border-radius: 50% 50% 20px 20px;
  opacity: 0.92;
  padding: 12px;
  transition: opacity 0.3s, transform 0.3s;
}

.piaget-stage:hover .stage-photo {
  opacity: 1;
  transform: scale(1.05);
}

.figure-icon {
  font-size: 3rem;
  transition: font-size 0.4s;
}

.piaget-stage:hover .figure-icon {
  font-size: 3.3rem;
}

.stage-info {
  background: white;
  padding: 20px 15px;
  border-radius: 16px;
  margin-top: 20px;
  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.08);
  text-align: center;
  transition: all 0.3s;
}

.piaget-stage:hover .stage-info {
  box-shadow: 0 8px 30px rgba(102, 126, 234, 0.15);
  transform: translateY(-3px);
}

.stage-age {
  font-size: 1.05rem;
  color: #667eea;
  font-weight: 700;
  margin: 0 0 8px 0;
}

.stage-name {
  font-size: 1.1rem;
  color: #2c3e50;
  margin: 0;
  font-weight: 600;
}

.stage-detail {
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(44, 62, 80, 0.96);
  color: white;
  padding: 22px 24px;
  border-radius: 16px;
  width: 320px;
  max-width: 90vw;
  margin-bottom: 20px;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.35);
  z-index: 10;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.stage-detail::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border: 12px solid transparent;
  border-top-color: rgba(44, 62, 80, 0.96);
}

.stage-detail p {
  font-size: 0.96rem;
  line-height: 1.7;
  margin: 0;
  color: rgba(255, 255, 255, 0.95);
  word-break: keep-all;
  overflow-wrap: break-word;
}

.slide-up-enter-active,
.slide-up-leave-active {
  transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.slide-up-enter-from,
.slide-up-leave-to {
  opacity: 0;
  transform: translateX(-50%) translateY(25px);
}
</style>