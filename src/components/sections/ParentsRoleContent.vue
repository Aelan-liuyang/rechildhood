<template>
  <div>
    <h3>çˆ¶æ¯ï¼šâ€œæ™’å¨ƒâ€æ˜¯ä¸ºäº†ä»€ä¹ˆï¼Ÿ</h3>
    <p>"åªæ˜¯æƒ³åˆ†äº«ä¸€ä¸‹"</p>
    <p>æ˜¯å¾ˆå¤šå®¶é•¿åœ¨ç¤¾äº¤åª’ä½“"æ™’å¨ƒ"çš„åˆè¡·ã€‚è®¸å¤šè´¦å·ç”±å®¶é•¿è¿è¥ï¼Œæˆ–æ˜¯ä»¥çˆ¶æ¯è§†è§’æ‹æ‘„å­©å­çš„æœ‰è¶£ç¬é—´ï¼Œæˆ–æ˜¯ä»¥å­©å­è§†è§’å¼€è®¾å„¿ç«¥è´¦å·ï¼Œä½†æ˜¯åœ¨æµé‡è‡³ä¸Šã€åˆ©ç›Šè¯±æƒ‘é¢å‰ï¼Œè¿™ä»½åˆ†äº«å¯èƒ½å°±ä¼šå˜äº†å‘³ã€‚</p>

    <!-- åœ°å›¾å’Œå…»è‚²æˆæœ¬å·¦å³å¸ƒå±€ -->
    <div class="cost-layout-wrapper">
      <h4 class="cost-main-title">å…»è‚²æˆæœ¬åˆ†æ</h4>
      <div class="cost-layout">
        <!-- å·¦ä¾§ï¼šåœ°å›¾ -->
        <div class="map-section">
          <div id="costMap" class="cost-map-chart"></div>
          <div class="cost-legend">
            <span class="legend-item"><span class="legend-color" style="background: #fee5d9"></span>30-40ä¸‡</span>
            <span class="legend-item"><span class="legend-color" style="background: #fcae91"></span>40-50ä¸‡</span>
            <span class="legend-item"><span class="legend-color" style="background: #fb6a4a"></span>50-60ä¸‡</span>
            <span class="legend-item"><span class="legend-color" style="background: #de2d26"></span>60-80ä¸‡</span>
            <span class="legend-item"><span class="legend-color" style="background: #a50f15"></span>80ä¸‡ä»¥ä¸Š</span>
          </div>
          <p class="chart-source">å„åœ°0-17å²å­©å­å¹³å‡å…»è‚²æˆæœ¬ï¼ˆæ¸¯æ¾³å°æœªç»Ÿè®¡ï¼‰<br>æ•°æ®æ¥æºï¼šã€Šä¸­å›½ç”Ÿè‚²æˆæœ¬æŠ¥å‘Š2024ã€‹</p>
        </div>

        <!-- å³ä¾§ï¼šå…»è‚²æˆæœ¬ -->
        <div class="cost-section">
          <div class="cost-info-box">
            <div class="money-bag-icon">
              <span class="money-icon">ğŸ’°</span>
            </div>
            <div class="cost-average">
              <p>å…¨å›½å®¶åº­0-17å²å­©å­çš„å…»è‚²æˆæœ¬å¹³å‡ä¸º<span class="cost-big">53.8ä¸‡å…ƒ</span></p>
            </div>
            <div class="revenue-data-box">
              <p class="revenue-text">æ®ç¬¬ä¸‰æ–¹æ•°æ®ï¼Œå„¿ç«¥ç½‘çº¢@ç‘¶ä¸€***å…¶çŸ­è§†é¢‘ç¤¾äº¤åª’ä½“è´¦å·å¹´å¹¿å‘Šæ”¶å…¥æˆ–è¶…1650ä¸‡å…ƒï¼Œè¿œè¶…90%çš„åŒç²‰ä¸é‡çº§è¾¾äººã€‚</p>
              <p class="revenue-source">æ•°æ®æ¥æºï¼šæ¾æ¹ƒæ–°é—»ã€ã€Šé½é²æ™šæŠ¥ã€‹</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="sales-highlight">
      <p>2025å¹´7æœˆï¼Œå„¿ç«¥åšä¸»çš„å¹³å‡é”€å”®é¢å°±è¾¾åˆ°<span class="sales-big">85ä¸‡å…ƒ</span>ï¼Œçº¦æ˜¯å…»è‚²æˆæœ¬çš„ä¸¤å€ã€‚</p>
    </div>
    <div class="sales-section">
      <h4 style="margin-top: 20px; color: #2c3e50; font-size: 1.3rem; margin-bottom: 15px;">äº²å­å¤´éƒ¨ç½‘çº¢æœˆé”€å”®é¢è¶‹åŠ¿</h4>
      <div ref="salesChart" class="sales-chart"></div>

      <p class="sales-text">
        ä»¥ä¸€å¤´éƒ¨äº²å­ç±»å‹ç½‘çº¢åˆ†æï¼Œå…¶è¿‘ä¸€ä¸ªæœˆé”€å”®é¢æœ€é«˜å¯è¾¾3750ä¸‡ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå½“å‰å®¶åº­è‚²å„¿é¢ä¸´é«˜ç»æµå‹åŠ›ï¼Œè€Œåœ¨é«˜é¢ç”Ÿè‚²æˆæœ¬ä¸äº²å­ç½‘çº¢æ”¶ç›Šå¯è§‚çš„æƒ…å†µä¸‹ï¼Œ<span
          class="highlight-text">"ç½‘çº¢å„¿ç«¥"</span>è¿™ä¸€èµ›é“æˆä¸ºäº†å®¶é•¿ä»¬ä¸é”™çš„"å‡å‹"æ–¹å¼ã€‚</p>
    </div>

    <!-- å„¿ç«¥è®¤çŸ¥å‘å±•çš„çœŸç›¸ -->
    <div class="piaget-section">
      <h3 class="piaget-title">å„¿ç«¥è®¤çŸ¥å‘å±•çš„çœŸç›¸</h3>
      <p class="piaget-intro">
        çš®äºšæ°ç†è®ºæ¸…æ™°è¡¨æ˜ï¼Œ7å²ä»¥ä¸‹å„¿ç«¥æ— æ³•ç†è§£æŠ½è±¡å•†ä¸šè¡Œä¸ºï¼Œ11å²ä»¥ä¸‹éš¾ä»¥çœŸæ­£è‡ªä¸»å†³ç­–ã€‚å½“å„¿ç«¥è´¦å·å±•ç¤º"æƒ³çº¢""çˆ±è¡¨æ¼”"æ—¶ï¼ŒèƒŒåå¾€å¾€æ˜¯çˆ¶æ¯å°†è‡ªèº«ä»·å€¼è§‚å«æ¥ç»™è®¤çŸ¥èƒ½åŠ›å—é™çš„å­©å­ã€‚
      </p>

      <div class="piaget-container">
        <div v-for="(stage, index) in piagetStages" :key="index" class="piaget-stage" @mouseenter="currentStage = index"
          @mouseleave="currentStage = null">
          <div class="stage-figure" :style="{ height: stage.height }">
            <img v-if="stage.image" :src="stage.image" alt="é˜¶æ®µå›¾ç‰‡" class="stage-photo" />
            <div class="figure-icon" v-else>ğŸ‘¶</div>
          </div>
          <div class="stage-info">
            <p class="stage-age">{{ stage.age }}</p>
            <h4 class="stage-name">{{ stage.name }}</h4>
          </div>
          <transition name="slide-up">
            <div v-if="currentStage === index" class="stage-detail" :class="`detail-pos-${index}`">
              <p>{{ stage.detail }}</p>
            </div>
          </transition>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from 'vue'
import * as echarts from 'echarts'

// ==================== Piaget é˜¶æ®µæ•°æ® ====================
const currentStage = ref(null)
const piagetStages = [
  {
    name: 'æ„ŸçŸ¥è¿åŠ¨é˜¶æ®µ',
    age: '0-2å²',
    height: '120px',
    detail: 'å©´å„¿é€šè¿‡çœ‹ã€æ‘¸ã€åƒã€æŠ“æ¥è®¤è¯†ä¸–ç•Œï¼Œå°±åƒ"ç”¨æ‰‹å’Œå˜´æ€è€ƒ"ã€‚è¿™ä¸ªé˜¶æ®µçš„å­©å­è¿"è—çŒ«çŒ«"éƒ½éš¾ä»¥ç†è§£ï¼Œæ›´æ— æ³•ç†è§£ç½‘ç»œçš„æ„ä¹‰ï¼Œä»–ä»¬çš„ä¸€åˆ‡è¡Œä¸ºä¾èµ–å³æ—¶ååº”ã€‚',
    image: new URL('@/assets/images/11.jpg', import.meta.url).href
  },
  {
    name: 'å‰è¿ç®—é˜¶æ®µ',
    age: '2-7å²',
    height: '140px',
    detail: 'å­©å­å¼€å§‹ç”¨è¯­è¨€å’Œç¬¦å·è¡¨è¾¾ï¼Œä½†æ€ç»´å……æ»¡å±€é™æ€§ï¼šè®¤ä¸ºæœˆäº®ä¼šè·Ÿç€è‡ªå·±èµ°ï¼Œæ— æ³•ç†è§£ä»–äººè§†è§’ã€‚è§‰å¾—ç©å…·æœ‰ç”Ÿå‘½ï¼Œä¼šå’Œå¨ƒå¨ƒèŠå¤©ã€‚å¦‚æœæœæ±ä»é«˜æ¯å€’è¿›çŸ®æ¯ï¼Œä»–ä»¬ä¼šåšæŒçŸ®æ¯"å˜å°‘äº†"ï¼Œæ— æ³•ç†è§£å®ˆæ’æ¦‚å¿µã€‚',
    image: new URL('@/assets/images/12.jpg', import.meta.url).href
  },
  {
    name: 'å…·ä½“è¿ç®—é˜¶æ®µ',
    age: '7-11å²',
    height: '160px',
    detail: 'å­©å­å¼€å§‹æœ‰é€»è¾‘ï¼Œä½†å¿…é¡»ä¾èµ–å…·ä½“ä¾‹å­ã€‚èƒ½ç†è§£"Aæ¯”Bé«˜ï¼ŒBæ¯”Cé«˜ï¼Œæ‰€ä»¥Aæ¯”Cé«˜"ï¼Œä½†æ— æ³•å›ç­”"å¦‚æœäººç±»ä¸ç”¨åƒé¥­ä¼šæ€æ ·"è¿™ç§æŠ½è±¡å‡è®¾ã€‚ä»–ä»¬ä¸¥æ ¼æŒ‰è§„åˆ™è¡Œäº‹ï¼Œè®¤ä¸º"è§„åˆ™ä¸èƒ½å˜"ã€‚',
    image: new URL('@/assets/images/13.jpg', import.meta.url).href
  },
  {
    name: 'å½¢å¼è¿ç®—é˜¶æ®µ',
    age: '11å²ä»¥å',
    height: '180px',
    detail: 'é’å°‘å¹´é€æ¸èƒ½è¿›è¡Œå‡è®¾æ¨ç†ï¼Œæ¯”å¦‚è®¨è®º"å¦‚æœåœ°çƒæ²¡æœ‰é‡åŠ›"ï¼Œä½†è¿™ç±»èƒ½åŠ›ä»éœ€æ•™è‚²å¼•å¯¼æ‰èƒ½æˆç†Ÿã€‚æ­¤å‰ï¼Œå„¿ç«¥å¯¹ç½‘ç»œé£é™©ã€é•¿æœŸåæœç¼ºä¹é¢„åˆ¤åŠ›ã€‚',
    image: new URL('@/assets/images/14.jpg', import.meta.url).href
  }
]

// ==================== æ•°æ®å¯¼å…¥ ====================
const costRefImg = new URL('@/assets/images/cost.png', import.meta.url).href

// é”€å”®é¢æ—¶é—´çº¿æ•°æ®
const salesData = [
  { date: '9.26', sales: '1-2.5ä¸‡', revenueMin: 250, revenueMax: 500, revenueAvg: 375 },
  { date: '10.9', sales: '1-2.5ä¸‡', revenueMin: 500, revenueMax: 750, revenueAvg: 625 },
  { date: '10.13', sales: '5-7.5ä¸‡', revenueMin: 1000, revenueMax: 2500, revenueAvg: 1750 },
  { date: '10.15', sales: '10-25ä¸‡', revenueMin: 2500, revenueMax: 5000, revenueAvg: 3750 },
  { date: '10.17', sales: '10-25ä¸‡', revenueMin: 1000, revenueMax: 2500, revenueAvg: 1750 },
  { date: '10.19', sales: '5-7.5ä¸‡', revenueMin: 2500, revenueMax: 5000, revenueAvg: 3750 },
  { date: '10.22', sales: '10-25ä¸‡', revenueMin: 500, revenueMax: 750, revenueAvg: 625 },
  { date: '10.24', sales: '10-25ä¸‡', revenueMin: 2500, revenueMax: 5000, revenueAvg: 3750 }
]

const salesChart = ref(null)
let salesChartInstance = null

onMounted(() => {
  // åˆå§‹åŒ–é”€å”®é¢æŠ˜çº¿å›¾
  if (salesChart.value) {
    salesChartInstance = echarts.init(salesChart.value)

    const dates = salesData.map(item => item.date)
    const avgRevenues = salesData.map(item => item.revenueAvg)
    const minRevenues = salesData.map(item => item.revenueMin)
    const maxRevenues = salesData.map(item => item.revenueMax)

    // è½¬æ¢é”€é‡æ•°æ®ï¼šå°†"1-2.5ä¸‡"è½¬æ¢ä¸ºæ•°å€¼ï¼ˆå–ä¸­é—´å€¼ï¼‰
    const salesVolumes = salesData.map(item => {
      const match = item.sales.match(/(\d+\.?\d*)-(\d+\.?\d*)/)
      if (match) {
        const min = parseFloat(match[1])
        const max = parseFloat(match[2])
        return (min + max) / 2
      }
      return 0
    })

    salesChartInstance.setOption({
      tooltip: {
        trigger: 'axis',
        formatter: function (params) {
          const dataIndex = params[0].dataIndex
          const item = salesData[dataIndex]
          let result = `${item.date}<br/>`
          params.forEach(param => {
            if (param.seriesName === 'é”€é‡ï¼ˆä¸‡ä»¶ï¼‰') {
              result += `${param.marker}${param.seriesName}: ${item.sales}<br/>`
            } else {
              result += `${param.marker}${param.seriesName}: ${item.revenueMin}-${item.revenueMax}ä¸‡å…ƒ<br/>`
            }
          })
          return result
        },
        backgroundColor: 'rgba(50, 50, 50, 0.9)',
        borderColor: '#667eea',
        borderWidth: 2,
        textStyle: {
          color: '#fff'
        }
      },
      grid: {
        left: '10%',
        right: '10%',
        bottom: '15%',
        top: '15%',
        containLabel: true
      },
      xAxis: {
        type: 'category',
        data: dates,
        axisLabel: {
          fontSize: 12,
          color: '#666'
        },
        axisLine: {
          lineStyle: {
            color: '#ddd'
          }
        }
      },
      yAxis: [
        {
          type: 'value',
          name: 'é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰',
          position: 'left',
          axisLabel: {
            formatter: '{value}',
            fontSize: 12,
            color: '#666'
          },
          splitLine: {
            lineStyle: {
              type: 'dashed',
              color: '#eee'
            }
          }
        },
        {
          type: 'value',
          name: 'é”€é‡ï¼ˆä¸‡ä»¶ï¼‰',
          position: 'right',
          axisLabel: {
            formatter: '{value}',
            fontSize: 12,
            color: '#666'
          },
          splitLine: {
            show: false
          }
        }
      ],
      series: [
        {
          name: 'é”€å”®é¢',
          type: 'line',
          yAxisIndex: 0,
          data: avgRevenues,
          smooth: true,
          lineStyle: {
            color: '#667eea',
            width: 3
          },
          itemStyle: {
            color: '#667eea',
            borderWidth: 2,
            borderColor: '#fff'
          },
          symbol: 'circle',
          symbolSize: 8,
          label: {
            show: true,
            position: 'top',
            fontSize: 11,
            fontWeight: 'bold',
            color: '#667eea',
            formatter: '{c}'
          },
          areaStyle: {
            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
              { offset: 0, color: 'rgba(102, 126, 234, 0.3)' },
              { offset: 1, color: 'rgba(102, 126, 234, 0.05)' }
            ])
          }
        },
        {
          name: 'é”€é‡ï¼ˆä¸‡ä»¶ï¼‰',
          type: 'line',
          yAxisIndex: 1,
          data: salesVolumes,
          smooth: true,
          lineStyle: {
            color: '#ff6b6b',
            width: 3
          },
          itemStyle: {
            color: '#ff6b6b',
            borderWidth: 2,
            borderColor: '#fff'
          },
          symbol: 'circle',
          symbolSize: 8,
          label: {
            show: true,
            position: 'bottom',
            fontSize: 11,
            fontWeight: 'bold',
            color: '#ff6b6b',
            formatter: '{c}'
          }
        }
      ],
      legend: {
        data: ['é”€å”®é¢', 'é”€é‡ï¼ˆä¸‡ä»¶ï¼‰'],
        bottom: 10,
        textStyle: {
          fontSize: 12
        }
      }
    })
  }
})

onUnmounted(() => {
  if (salesChartInstance) {
    salesChartInstance.dispose()
  }
})
</script>

<style scoped>
/* ==================== å…»è‚²æˆæœ¬å¹³å‡å€¼æ ·å¼ ==================== */
.cost-average {
  width: 100%;
  margin: 0;
  padding: 10px 12px;
  background: linear-gradient(135deg, #f0f4ff 0%, #e0e7ff 100%);
  border-radius: 8px;
  border-left: 3px solid #667eea;
}

.cost-average p {
  margin: 0;
  font-size: 0.88rem;
  line-height: 1.5;
  color: #2c3e50;
  text-align: center;
  word-break: keep-all;
  overflow-wrap: break-word;
}

.cost-big {
  font-size: 1.3rem;
  font-weight: 800;
  color: #667eea;
}

/* ==================== åœ°å›¾å’Œå…»è‚²æˆæœ¬å·¦å³å¸ƒå±€ ==================== */
.cost-layout-wrapper {
  background: white;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
  margin: 25px 0;
}

.cost-main-title {
  color: #2c3e50;
  font-size: 1.3rem;
  margin: 0 0 18px 0;
  text-align: center;
  font-weight: 700;
  padding-bottom: 12px;
  border-bottom: 2px solid #e9ecef;
}

.cost-layout {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 18px;
  align-items: start;
}

.map-section,
.cost-section {
  background: transparent;
  padding: 0;
  border-radius: 0;
  box-shadow: none;
  transition: none;
  display: flex;
  flex-direction: column;
}

.map-section:hover,
.cost-section:hover {
  transform: none;
  box-shadow: none;
}

.cost-map-chart {
  width: 100%;
  height: 380px;
  background: #f8f9fa;
  border-radius: 10px;
}

.chart-source {
  text-align: center;
  color: #666;
  margin-top: 10px;
  font-size: 0.85rem;
  line-height: 1.5;
}

.cost-info-box {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 10px;
  margin-top: 0;
}

.money-bag-icon {
  width: auto;
  height: auto;
  min-width: 100px;
  min-height: 100px;
  margin: 0 auto 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {

  0%,
  100% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.05);
  }
}

.money-icon {
  font-size: 23rem;
  display: block;
  line-height: 1;
}

.revenue-data-box {
  width: 100%;
  margin: 0;
  padding: 10px 12px;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border-radius: 8px;
  border-left: 3px solid #667eea;
}

.revenue-text {
  font-size: 0.83rem;
  line-height: 1.5;
  color: #495057;
  margin: 0 0 6px 0;
  text-align: left;
  word-break: keep-all;
  overflow-wrap: break-word;
}

.revenue-source {
  font-size: 0.72rem;
  color: #6c757d;
  margin: 0;
  text-align: left;
}

.cost-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
  margin: 12px 0;
  padding: 10px 0;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.9rem;
  color: #555;
}

.legend-color {
  width: 20px;
  height: 20px;
  border-radius: 4px;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

/* ==================== é”€å”®é¢æŠ˜çº¿å›¾ ==================== */
.sales-section {
  margin: 20px 0;
  background: white;
  border-radius: 12px;
  padding: 18px 20px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
}

.sales-chart {
  width: 100%;
  height: 320px;
  margin: 0;
  padding: 0;
}

.sales-highlight {
  margin: 12px 0;
  padding: 10px 15px;
  background: linear-gradient(135deg, #fff5e6 0%, #ffe5cc 100%);
  border-radius: 8px;
  border-left: 3px solid #ff9800;
}

.sales-highlight p {
  margin: 0;
  font-size: 0.9rem;
  line-height: 1.6;
  color: #2c3e50;
  text-align: center;
  word-break: keep-all;
  overflow-wrap: break-word;
}

.sales-big {
  font-size: 1.3rem;
  font-weight: 800;
  color: #ff9800;
}

.sales-text {
  margin-top: 15px;
  font-size: 0.95rem;
  line-height: 1.7;
  color: #2c3e50;
  text-align: justify;
  word-break: keep-all;
  overflow-wrap: break-word;
}

.highlight-text {
  font-weight: 700;
  color: #ff9800;
}

/* ==================== å…»è‚²æˆæœ¬å›¾ç‰‡ ==================== */
.cost-image-wrapper {
  width: 100%;
  margin-top: 15px;
  text-align: center;
}

.cost-ref-image {
  max-width: 100%;
  height: auto;
  border-radius: 12px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
}

/* ==================== å“åº”å¼è®¾è®¡ ==================== */
@media (max-width: 1024px) {
  .cost-layout-wrapper {
    padding: 18px;
  }

  .cost-main-title {
    font-size: 1.2rem;
    margin-bottom: 15px;
    padding-bottom: 10px;
  }

  .cost-layout {
    grid-template-columns: 1fr;
    gap: 15px;
  }

  .cost-map-chart {
    height: 350px;
  }
}

@media (max-width: 768px) {
  .cost-average {
    padding: 8px 12px;
    margin: 10px 0;
  }

  .cost-average p {
    font-size: 0.85rem;
  }

  .cost-big {
    font-size: 1.1rem;
  }

  .sales-highlight {
    padding: 8px 12px;
    margin: 10px 0;
  }

  .sales-highlight p {
    font-size: 0.85rem;
  }

  .sales-big {
    font-size: 1.1rem;
  }

  .sales-section {
    padding: 15px 18px;
  }

  .sales-chart {
    height: 280px;
  }

  .sales-text {
    font-size: 0.9rem;
    margin-top: 12px;
  }

  .cost-layout-wrapper {
    padding: 15px;
  }

  .cost-main-title {
    font-size: 1.1rem;
    margin-bottom: 12px;
    padding-bottom: 8px;
  }

  .cost-info-box {
    gap: 8px;
  }

  .money-bag-icon {
    width: auto;
    height: auto;
    min-width: 80px;
    min-height: 80px;
    margin-bottom: 6px;
  }

  .money-icon {
    font-size: 4rem;
  }

  .cost-average,
  .revenue-data-box {
    padding: 8px 10px;
  }

  .cost-average p {
    font-size: 0.82rem;
  }

  .cost-big {
    font-size: 1.15rem;
  }

  .revenue-text {
    font-size: 0.8rem;
    line-height: 1.4;
  }

  .revenue-source {
    font-size: 0.7rem;
  }

  .cost-map-chart {
    height: 350px;
  }

  .cost-legend {
    flex-direction: column;
    align-items: flex-start;
  }

  .piaget-section {
    padding: 20px 15px;
  }

  .piaget-title {
    font-size: 1.2rem;
    margin-bottom: 12px;
  }

  .piaget-intro {
    font-size: 0.9rem;
    margin-bottom: 15px;
  }

  .piaget-container {
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    padding: 8px 0;
  }

  .piaget-stage {
    max-width: 100%;
  }

  .stage-detail {
    width: 350px;
    max-width: calc(100vw - 30px);
  }

  .stage-detail.detail-pos-0,
  .stage-detail.detail-pos-3 {
    left: 50%;
    transform: translateX(-50%);
  }

  .stage-detail.detail-pos-0::after,
  .stage-detail.detail-pos-3::after {
    left: 50%;
    transform: translateX(-50%);
  }
}

@media (max-width: 480px) {
  .piaget-container {
    grid-template-columns: 1fr;
    gap: 20px;
  }

  .stage-detail {
    width: 280px;
    max-width: calc(100vw - 20px);
    left: 50% !important;
    right: auto !important;
    transform: translateX(-50%) !important;
  }

  .stage-detail::after {
    left: 50% !important;
    right: auto !important;
    transform: translateX(-50%) !important;
  }
}

/* ==================== Piaget é˜¶æ®µæ ·å¼ ==================== */
.piaget-section {
  margin-top: 40px;
  padding: 25px 20px;
  background: linear-gradient(135deg, rgba(255, 236, 210, 0.4) 0%, rgba(252, 182, 159, 0.4) 100%);
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
}

.piaget-title {
  color: #2c3e50;
  font-size: 1.4rem;
  font-weight: 700;
  text-align: center;
  margin: 0 0 15px 0;
}

.piaget-intro {
  color: #555;
  font-size: 0.95rem;
  line-height: 1.7;
  text-align: justify;
  text-justify: inter-ideograph;
  max-width: 900px;
  margin: 0 auto 20px;
  padding: 0;
  word-break: keep-all;
  overflow-wrap: break-word;
}

.piaget-container {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 15px;
  align-items: end;
  max-width: 1200px;
  margin: 0 auto;
  padding: 10px 0;
}

.piaget-stage {
  max-width: 100%;
  margin: 0;
  position: relative;
  cursor: pointer;
  transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.piaget-stage:hover {
  transform: translateY(-8px);
}

.stage-figure {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 50% 50% 15px 15px;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding-bottom: 12px;
  transition: all 0.4s ease;
  position: relative;
  overflow: hidden;
}

.piaget-stage:hover .stage-figure {
  box-shadow: 0 16px 45px rgba(102, 126, 234, 0.5);
  transform: scale(1.04);
}

.stage-photo {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  object-position: center bottom;
  border-radius: 50% 50% 15px 15px;
  opacity: 0.92;
  padding: 8px;
  transition: opacity 0.3s, transform 0.3s;
}

.piaget-stage:hover .stage-photo {
  opacity: 1;
  transform: scale(1.05);
}

.figure-icon {
  font-size: 2rem;
  transition: font-size 0.4s;
}

.piaget-stage:hover .figure-icon {
  font-size: 2.2rem;
}

.stage-info {
  background: white;
  padding: 12px 10px;
  border-radius: 12px;
  margin-top: 12px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
  text-align: center;
  transition: all 0.3s;
}

.piaget-stage:hover .stage-info {
  box-shadow: 0 8px 30px rgba(102, 126, 234, 0.15);
  transform: translateY(-3px);
}

.stage-age {
  font-size: 0.9rem;
  color: #667eea;
  font-weight: 700;
  margin: 0 0 6px 0;
}

.stage-name {
  font-size: 0.95rem;
  color: #2c3e50;
  margin: 0;
  font-weight: 600;
}

.stage-detail {
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(44, 62, 80, 0.96);
  color: white;
  padding: 18px 20px;
  border-radius: 12px;
  width: 450px;
  max-width: calc(100vw - 40px);
  margin-bottom: 15px;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.35);
  z-index: 10;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* ç¬¬ä¸€ä¸ªå›¾è¡¨ï¼ˆæœ€å·¦è¾¹ï¼‰çš„å¼¹å‡ºæ¡†é å³å¯¹é½ */
.stage-detail.detail-pos-0 {
  left: 0;
  transform: translateX(0);
}

.stage-detail.detail-pos-0::after {
  left: 30px;
  transform: translateX(0);
}

/* æœ€åä¸€ä¸ªå›¾è¡¨ï¼ˆæœ€å³è¾¹ï¼‰çš„å¼¹å‡ºæ¡†é å·¦å¯¹é½ */
.stage-detail.detail-pos-3 {
  left: auto;
  right: 0;
  transform: translateX(0);
}

.stage-detail.detail-pos-3::after {
  left: auto;
  right: 30px;
  transform: translateX(0);
}

/* ä¸­é—´ä¸¤ä¸ªå›¾è¡¨ä¿æŒå±…ä¸­ */
.stage-detail.detail-pos-1,
.stage-detail.detail-pos-2 {
  left: 50%;
  transform: translateX(-50%);
}

.stage-detail::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border: 12px solid transparent;
  border-top-color: rgba(44, 62, 80, 0.96);
}

.stage-detail p {
  font-size: 0.96rem;
  line-height: 1.7;
  margin: 0;
  color: rgba(255, 255, 255, 0.95);
  word-break: keep-all;
  overflow-wrap: break-word;
  text-align: justify;
}

.slide-up-enter-active,
.slide-up-leave-active {
  transition: all 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.slide-up-enter-from,
.slide-up-leave-to {
  opacity: 0;
  transform: translateX(-50%) translateY(25px);
}
</style>